/* ==========================================================================
   Cases Paginator (base)
   ========================================================================== */

:root {
    --vh: 1vh;
}

/* Theme defaults (overridden below for .case-page-template) */
.case-page-template {
    --page-transition-bg: #222;
}

.cases-paginator {
    --cases-accent: var(--brand-accent, #ce2312);
    --cases-overlay-bg: var(--overlay-bg, rgb(0 0 0 / 55%));
    --cases-overlay-text: var(--color-on-overlay, #f5f5f5);
    --cases-dot-active: var(--body-text-color, #111);
    --cases-dot-inactive: #cfcfcf;
}

/* Contain scroll chaining while locked */
.cases-paginator-container,
.cases-paginator {
    overscroll-behavior: contain;
}

/* Page hard-lock */
body.cases-page-locked {
    overflow: hidden;
    height: 100vh;
}

/* Accessibility utility */
.visually-hidden {
    position: absolute !important;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0 0 0 0);
    white-space: nowrap;
    border: 0;
}

/* Wrapper */
.cases-scene {
    position: relative;
    height: calc(var(--vh) * 100);
    overflow: hidden;
    color: inherit;
    font: inherit;
    padding-bottom: env(safe-area-inset-bottom, 0);
}

/* Helpers */
.cases-scene .heading {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 100;
    font-size: clamp(28px, 5vw, 64px);
    font-weight: 800;
    opacity: 0.7;
    transition: opacity 0.3s, transform 0.3s;

    /* gradient text + motion (об'єднано з "Animated helper texts") */
    background-image: linear-gradient(
        90deg,
        var(--cases-accent),
        var(--color-blue-lighter, #7ecbff),
        var(--color-blue, #4b88ff),
        var(--cases-accent)
    );
    background-size: 300% 100%;
    background-clip: text;
    color: transparent;
    animation: cases-gradient-pan 6s linear infinite;
    animation-play-state: paused;
    text-shadow:
        0 0 14px rgb(76 225 186 / 35%),
        0 0 6px rgb(126 203 255 / 25%);
    filter: drop-shadow(0 2px 10px rgb(0 0 0 / 25%));
}

.cases-scene .scroll-down,
.cases-scene .click-blocks {
    position: absolute;
    left: 50%;
    transform-origin: 0 50%;
    transform: rotate(-90deg);
    font-size: clamp(12px, 1.3vmax, 18px);
    transition: opacity 0.3s, transform 0.3s, color 0.3s;
    z-index: 100;

    /* gradient text + motion (об'єднано з "Animated helper texts") */
    background-image: linear-gradient(
        90deg,
        var(--color-blue, #4b88ff),
        var(--color-aqamarine, #4ce1ba),
        var(--color-blue-lighter, #7ecbff),
        var(--color-blue, #4b88ff)
    );
    background-size: 320% 100%;
    background-clip: text;
    color: transparent;
    animation: cases-gradient-pan 8s linear infinite, cases-breathe 2s ease-in-out infinite;
    animation-play-state: paused;
    text-shadow:
        0 0 8px rgb(126 203 255 / 35%),
        0 0 4px rgb(76 225 186 / 25%);
}

.cases-scene .scroll-down {
    bottom: 13%;
}

.cases-scene .click-blocks {
    top: 23%;
}

/* Pagination */
.cases-scene .pagination {
    position: absolute;
    left: 50%;
    top: 95%;
    transform: translate(-50%, -50%);
    z-index: 100;
    transition: opacity 0.3s, transform 0.3s;
}

.cases-scene .pagination .page-names {
    text-align: center;
    margin-bottom: 0.25vh;
    min-height: 26px;
}

.cases-scene .pagination .page-names li {
    display: none;
    font-weight: 700;
    font-size: clamp(19px, 1.2vw, 28px);
}

.cases-scene .pagination .page-names li.active {
    display: block;
}

.cases-scene .pagination .page-dots {
    text-align: center;
}

.cases-scene .pagination .page-dots li {
    display: inline-block;
    margin: 0.3vw;
    cursor: pointer;
    user-select: none;
    color: var(--cases-dot-inactive);
}

.cases-scene .pagination .page-dots li.active {
    color: var(--cases-dot-active);
}

.cases-scene .pagination .page-dots.is-hidden,
.cases-scene .pagination .page-names.is-hidden {
    display: none;
}

/* Two-pane image containers (desktop mirrored) */
.cases-scene .img-cont {
    height: calc(var(--vh) * 80);
    width: 35vw;
    position: absolute;
    top: calc(var(--vh) * 10);
    left: 50%;
    background: var(--bg, none) 50% 50% / cover no-repeat fixed;
    transition: margin 1s cubic-bezier(0.99, 0.1, 0.35, 1.2);
    will-change: margin;
    z-index: 10;
    border-radius: 12px;
    box-shadow: 0 8px 24px rgb(0 0 0 / 18%);
}

.cases-scene .img-cont:not(.active) {
    cursor: pointer;
}

.cases-scene .img-cont.left {
    margin-left: calc(-35vw - 50px);
}

.cases-scene .img-cont.right {
    margin-left: 50px;
}

/* Cards slide (shared desktop/mobile) */
.cases-scene .cards-slide {
    position: absolute;
    inset: 0 0 auto;
    height: calc(var(--vh) * 100);
    padding: 24px;
    box-sizing: border-box;
    transition: margin 1s cubic-bezier(0.99, 0.1, 0.35, 1.2);
    will-change: margin;
    z-index: 10;
}

.cases-scene .cards-grid {
    display: grid;
    grid-template-columns: repeat(var(--cards-per-row, 2), 1fr);
    gap: 16px;
    height: 100%;
    align-content: center;
    max-width: 1240px;
    margin: 0 auto;
}

.cases-scene .case-card {
    display: grid;
    grid-template-rows: 315px auto;
    border: 1px solid var(--color-white-10, rgb(255 255 255 / 10%));
    border-radius: 30px;
    background: rgb(255 255 255 / 3%);
    overflow: hidden;
    transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
}

.cases-scene .case-card:hover,
.cases-scene .case-card:focus-within {
    transform: translateY(-2px);
    border-color: var(--color-aqamarine);
    box-shadow: 0 8px 24px rgb(0 0 0 / 18%);
}

.cases-scene .case-card .card-media {
    display: block;
    width: 100%;
    border-radius: 30px;
    height: 100%;
    background: center / cover no-repeat;
}

.cases-scene .case-card .card-body {
    padding: 12px 14px;
    color: var(--primary-text-color, #111);
}

.cases-scene .case-card .card-title {
    font-family: var(--secondary-font-family, inherit);
    font-size: var(--body-font-size-m, 18px);
    line-height: var(--line-height-m, 1.4);
    margin: 0 0 6px;
}

.cases-scene .case-card .card-text {
    font-size: var(--body-font-size-s, 16px);
    opacity: 0.9;
    margin: 0 0 8px;
}

.cases-scene .case-card .button {
    display: inline-block;
    padding: 0.5rem 0.9rem;
    border-radius: 999px;
    border: 1px solid var(--color-aqamarine);
    color: var(--primary-text-color);
    text-decoration: none;
    background: transparent;
}

.cases-scene .case-card .button:hover {
    background: rgb(76 225 186 / 8%);
}

/* Motion toggles */
.cases-scene[data-animate="on"] .heading,
.cases-scene[data-animate="on"] .scroll-down,
.cases-scene[data-animate="on"] .click-blocks {
    animation-play-state: running;
}


/* Animations */
@keyframes cases-gradient-pan {
    0% {
        background-position: 0% 50%;
    }
    
    100% {
        background-position: 300% 50%;
    }
}

@keyframes cases-breathe {
    0%,
    100% {
        opacity: 0.74;
    }
    
    50% {
        opacity: 1;
    }
}


/* Pagination touch comfort on small screens */
@media (width <= 768px) {
    .cases-scene .pagination .page-dots li {
        padding: 8px;
    }

    .cases-scene .pagination .page-names {
        min-height: 22px;
    }
}


/* Handle short, landscape devices */
@media (height <= 620px) {
    .cases-scene .heading {
        font-size: clamp(22px, 4.2vw, 52px);
    }

    .cases-scene .pagination .page-names li {
        font-size: clamp(16px, 1vw, 22px);
    }

    .cases-scene .img-cont {
        border-radius: 10px;
    }
}


/* Very tall displays */
@media (height >= 1100px) {
    .cases-scene .img-cont {
        box-shadow: 0 10px 32px rgb(0 0 0 / 16%);
    }
}


/* ==========================================================================
   Mobile mode (<= 991px). Для BEM-модифікаторів вимикаємо перевірку імен.
   ========================================================================== */

/* stylelint-disable selector-class-pattern */

@media (width <= 991px) {
    /* Hide global helpers on mobile; we use slide-local versions */
    .cases-scene.is-mobile .heading--global,
    .cases-scene.is-mobile .scroll-down--global,
    .cases-scene.is-mobile .click-blocks--global {
        display: none;
    }
}

@media (width <= 991px) {
    .cases-scene .cards-slide--mobile {
        padding-left: 16px;
        padding-right: 16px;
    }

    .cases-scene .cards-slide--mobile .mobile-stack {
        display: grid;
        grid-template-rows: 1fr auto 1fr; /* first card / heading / second card */
        height: 100%;
        gap: 10px;
        max-width: 720px;
        margin: 0 auto;
    }

    .cases-scene .cards-slide--mobile .card-wrap {
        position: relative;
        display: grid;
        grid-template-rows: minmax(0, 1fr) auto; /* media grows, text auto */
        min-height: 0;
    }

    .cases-scene .cards-slide--mobile .card-wrap .case-card {
        display: grid;
        grid-template-rows: minmax(0, 1fr) auto;
        height: 100%;
    }

    .cases-scene .cards-slide--mobile .card-wrap .card-media {
        min-height: 0;
    }

    /* Centered heading between cards */
    .cases-scene .heading--mobile {
        place-self: center;
        text-align: center;
        font-size: clamp(22px, 6vw, 36px);
        font-weight: 800;
        line-height: 1.1;
        margin: 4px 0;
    }

    /* Helper labels near the cards */
    .cases-scene .click-blocks--mobile,
    .cases-scene .scroll-down--mobile {
        position: absolute;
        top: 50%;
        transform: translateY(-50%) rotate(-90deg);
        font-size: 14px;
        pointer-events: none;
        opacity: 0.9;
    }

    .cases-scene .click-blocks--mobile {
        right: -8px;
        transform-origin: 100% 50%;
    }

    .cases-scene .scroll-down--mobile {
        left: -8px;
        transform-origin: 0% 50%;
    }

    /* Ensure 1 column if any desktop cards grid slips through */
    .cases-scene .cards-grid {
        grid-template-columns: 1fr !important;
        gap: 12px;
    }
}

/* stylelint-enable selector-class-pattern */


/* ==========================================================================
   Theme integration for Case Page Template (EDS)
   ========================================================================== */

.case-page-template .cases-paginator {
    --cases-accent: var(--color-aqamarine);
    --cases-overlay-bg: var(--color-bg-gray-linear-transperent, rgb(0 0 0 / 55%));
    --cases-overlay-text: var(--primary-text-color);
    --cases-dot-active: var(--primary-text-color);
    --cases-dot-inactive: var(--color-white-10);
}

.case-page-template .cases-scene {
    color: var(--primary-text-color);
    font-family: var(--primary-font-family);
}

.case-page-template .cases-scene .heading {
    color: var(--cases-accent);
    font-family: var(--secondary-font-family);
    line-height: var(--line-height-normal);
}

.case-page-template .cases-scene .pagination .page-names li {
    color: var(--primary-text-color);
    font-family: var(--secondary-font-family);
    line-height: var(--line-height-m);
}

.case-page-template .cases-scene .pagination .page-dots li {
    color: var(--cases-dot-inactive);
    font-size: 40px;
}

.case-page-template .cases-scene .pagination .page-dots li.active {
    color: var(--cases-dot-active);
}

/* Hover title only (keep behavior) */
.cases-scene .pagination .page-names li:not(.hover-title) {
    display: none !important;
}

.cases-scene .pagination .page-names .hover-title {
    display: block;
}

.cases-scene .pagination .page-names .hover-title:empty {
    display: none;
}
